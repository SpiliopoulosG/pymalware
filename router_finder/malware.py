import threading 
import requests
from termcolor import colored
import argparse

def get_arguments():
    parser = argparse.ArgumentParser(description="Router IP Scanner")
    parser.add_argument("-f", "--file", type=str, help="File with directories", required=True)
    args = parser.parse_args()
    return args

def request(url):
    try:
        response =  requests.get(url="http://" + url, timeout=1)
        if response:
            print(colored("[+] Discovered Router at this path %s" % url, 'green'))
    except requests.exceptions.ConnectionError:
        pass

def open_thread():
    url = urls.pop()
    # print(colored("[+] Going to %s" % url, 'magenta'))
    t = threading.Thread(target=request, args=[url])
    t.start()

args = get_arguments()
file = open(args.file, 'r')
urls = [url.strip() for url in file ]

while True:

    if len(urls) == 0:
        break

    open_thread()